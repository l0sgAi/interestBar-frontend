<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>趣吧 Quba - 发现你的热爱</title>
    <script>
      // SPA Fallback for GitHub Pages
      // 保存原始路径和查询参数
      const path = window.location.pathname
      const search = window.location.search
      const hash = window.location.hash

      // 移除基础路径 /interestBar-frontend/
      const basePath = '/interestBar-frontend/'
      let redirectPath = path

      if (path.startsWith(basePath)) {
        redirectPath = path.substring(basePath.length)
      }

      // 构建完整的重定向路径（保留查询参数和 hash）
      const fullPath = (redirectPath || '/') + search + hash

      // 保存到 sessionStorage，供 main.js 读取
      sessionStorage.setItem('spa-redirect', fullPath)

      // 重定向到首页，加载 Vue 应用
      window.location.replace(basePath)
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
